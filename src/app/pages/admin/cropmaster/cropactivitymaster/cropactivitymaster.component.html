<div class="box_main">
    <div class="container" style="margin: 0px 0px !important;">
        <div class="col-md-12 bg-card shadow rounded overflow-hidden" style="background-color: white;">
            <div class="header_top_btn mb-5">
                <div class="row">
                    <div class="col-md-6">
                        <h1 class="master-heading-small">Crop Activity</h1>
                    </div>
                    <div class="col-md-6">
                        <button class="addbtn" mat-flat-button [color]="'primary'" (click)="open(addnew)">Add New
                            Activity</button>
                    </div>
                </div>
            </div>
            <div class="">
                <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover">
                    <thead>
                        <tr>
                            <th>S.Id</th>
                            <th>Crop Family</th>
                            <th>Crop Name</th>
                            <th>Activity Name</th>
                            <th>Season</th>
                            <th>Delete</th>
                            <th>Edit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Nightshade (Solanaceae)</td>
                            <td>Chilli (Green Long/Routine), Tomato (Hybrid/Round), Tomato (Hybrid/Long), Tomato
                                (Cherry), Brinjal (Long), Brinjal (Cut), Brinjal (Bharwa), Brinjal (Bharta), Capsicum
                                (Green/Yellow/Red), Chilli (Pakoda)</td>
                            <td>Irrigation</td>
                            <td>Winter</td>
                            <td class="delete_icons" (click)="statusModal(delete)">
                                <mat-icon svgIcon="dripicons:trash"></mat-icon>
                            </td>
                            <td (click)="open(editone)" class="edit_icons">
                                <mat-icon svgIcon="dripicons:pencil"></mat-icon>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <ng-template #add let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
                        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="row">
                                <div class="col-md-4">
                                    <mat-label class="custom-label">Select Activity</mat-label>
                                    <mat-form-field class="flex-auto">
                                        <mat-select>
                                            <mat-option value="0">Select Activity</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark"
                            (click)="modal.close('Save click')">Save</button>
                    </div>
                </ng-template>

                <ng-template #edit let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">Update Activity Name</h4>
                        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="dateOfBirth">Activity Name</label>
                                        <input type="text" placeholder="Blue Sticky Trap" name="Blue Sticky Trap">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="dateOfBirth">Material Based Activity</label>
                                        <select class="form-control" name="Material Based Activity">
                                            <option value="mat">General Activity</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dateOfBirth">Description</label>
                                <textarea name="" id="" cols="30" rows="6"></textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark"
                            (click)="modal.close('Save click')">Save</button>
                    </div>
                </ng-template>

                <ng-template #status let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
                        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="dateOfBirth">Date of birth</label>
                                <div class="input-group">

                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-dark"
                            (click)="modal.close('Save click')">Save</button>
                    </div>
                </ng-template>



                <ng-template #addnew let-modal>
                    <div class="modal-header">
                        <h4 class="modal-title" id="modal-basic-title">Crop Activity Master</h4>
                        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-8">
                                <mat-label class="custom-label">Select Activity</mat-label>
                                <mat-form-field class="flex-auto">
                                    <mat-select [(ngModel)]="activity_id_type" name="activity_id_type" (selectionChange)="activityOnChange()">
                                        <mat-option value="0">Select Activity</mat-option>
                                        <mat-option *ngFor="let act_data of activitiesdata"
                                            value="{{act_data.mr_com_id+'_'+act_data.com_record_type }}">
                                            {{act_data.mr_com_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>                           
                            <div class="col-md-4">
                                <mat-label class="custom-label">Select Family</mat-label>
                                <mat-form-field class="flex-auto">
                                    <mat-select [(ngModel)]="family_id" name="family_id"
                                    (selectionChange)="familyOnChange('add')">
                                    <mat-option value="0">Select Family</mat-option>
                                    <mat-option *ngFor="let family of crop_family_master"
                                        value="{{family.cf_id}}">
                                        {{family.cf_name}}</mat-option>
                                </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-label class="custom-label">Select Crop Name</mat-label>
                                <ng-select [multiple]="true" [(ngModel)]="crop_sub_category_name">
                                    <ng-option *ngFor="let subcategory of filteredCropCategory" [value]="subcategory.crop_category_id">
                                        {{subcategory.crop_category}} / {{subcategory.crop_sub_category}}</ng-option>
                                </ng-select>                              
                            </div>
                            <div class="col-md-3">
                                <mat-label class="custom-label">Activity Type (Nutrition/Protection)</mat-label>
                                <mat-form-field class="flex-auto">
                                    <mat-select [(ngModel)]="act_type_id" name="act_type_id">
                                        <mat-option value="0">Select Type</mat-option>
                                        <mat-option *ngFor="let act_type_data of act_type"
                                            value="{{act_type_data.act_type_id}}">
                                            {{act_type_data.act_type_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-label class="custom-label">Applicable to (Root/Shoot)</mat-label>
                                <mat-form-field class="flex-auto">
                                    <mat-select [(ngModel)]="act_type_to_id" name="act_type_to_id" >
                                        <mat-option value="0">Select Type</mat-option>
                                        <mat-option *ngFor="let act_type_to_data of act_type_to"
                                            value="{{act_type_to_data.act_type_to_id}}">
                                            {{act_type_to_data.act_type_to_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div *ngIf="activity_type=='2'">
                            <div class=" col-md-12">
                                <label>Material & Quantity Selection</label>
                            </div>
                            <div class="col-md-12">
                                <mat-label class="custom-label">Choose Material Type</mat-label>
                                <mat-form-field class="flex-auto">                                   
                                    <mat-select [(ngModel)]="material_id" name="material_id">
                                        <mat-option value="0">Select Material Type</mat-option>
                                        <mat-option *ngFor="let matdata of materialmaster"
                                            value="{{matdata.mr_com_id}}">
                                            {{matdata.mr_com_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-label class="custom-label">Quantity</mat-label>
                                <mat-form-field class="flex-auto">
                                    <input matInput type="number" name="material_quantity" [(ngModel)]="material_quantity" />
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-label class="custom-label">Unit</mat-label>
                                <mat-form-field class="flex-auto">                                   
                                    <mat-select [(ngModel)]="mat_unit_id" name="mat_unit_id">
                                        <mat-option value="0">Select Unit</mat-option>
                                        <mat-option *ngFor="let unitdata of unitmeasurementmaster"
                                            value="{{unitdata.mr_com_id}}">
                                            {{unitdata.mr_com_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-label class="custom-label">Area</mat-label>
                                <mat-form-field class="flex-auto">                                   
                                    <mat-select [(ngModel)]="mat_area_id" name="mat_area_id">
                                        <mat-option value="0">Select Area</mat-option>
                                        <mat-option *ngFor="let landdata of landmeasurement"
                                            value="{{landdata.mr_com_id}}">
                                            {{landdata.mr_com_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <label>Application Logic</label>
                        </div>
                        <div class="col-md-12">
                            <div class="inline-div">
                                <p class="login_headings">Starting from
                                    <input type="number" name="starting_from" [(ngModel)]="starting_from" class="login_number">st
                                    Day of
                                    <select [(ngModel)]="starting_stage" name="starting_stage">
                                        <option *ngFor="let stageData of crop_stage_master" [value]="stageData.crop_stage_id">{{stageData.crop_stage_name}}</option>
                                    </select>
                                    For
                                    <select>
                                        <option>Manual</option>
                                    </select>
                                    Every
                                    <input type="text" class="login_number">
                                    <select>
                                        <option>End with</option>
                                    </select>
                                    <select>
                                        <option>Stage</option>
                                    </select>
                                </p>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <label>Season & Soil Selection</label>
                        </div>
                        <div class="col-md-12">
                            <mat-label class="custom-label">Select Soil</mat-label>
                            <ng-select [multiple]="true" [(ngModel)]="soilmaster_id" name="soilmaster_id">
                                <ng-option *ngFor="let soils of soilmaster" [value]="soils.mr_com_id">
                                    {{soils.mr_com_name}}</ng-option>
                            </ng-select>
                        </div>
                        <div class="col-md-12">
                            <table>
                                <caption>Season & Season Type</caption>
                                <thead>
                                    <th>#</th>
                                    <th>Season</th>
                                    <th>Sub Season</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let seasonselectiondata of season_selection">
                                        <td>1</td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Season</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <ng-select [multiple]="true" [(ngModel)]="selectedCars">
                                                    <ng-option *ngFor="let car of cars" [value]="car.id"
                                                        [disabled]="car.disabled">{{car.name}}</ng-option>
                                                    <ng-option [value]="'custom'">Custom</ng-option>
                                                </ng-select>
                                            </div>
                                        </td>
                                        <td>
                                            +
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-12">
                            <label> Add Additional Material </label><input type="checkbox" name="additional">
                            <p>All the Quantities are in unit / Square Feet (sq ft).</p>
                        </div>
                        <div class="col-md-12">
                            <table>
                                <caption>Aditional Material</caption>
                                <thead>
                                    <th>Material</th>
                                    <th>Qty</th>
                                    <th>Unit</th>
                                    <th>Stage</th>
                                    <th>Loop</th>
                                    <th>Iteration</th>
                                    <th>End</th>
                                    <th>End Stage</th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Material</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <input matInput type="number" />
                                                </mat-form-field>
                                            </div>

                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Unit</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Stage</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Loop</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <input matInput type="number" />
                                                </mat-form-field>
                                            </div>

                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Loop</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-md-12">
                                                <mat-form-field class="flex-auto">
                                                    <mat-select>
                                                        <mat-option value="0">Select Loop</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </td>

                                        <td>
                                            +
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Submit</button>
            </div>
            </ng-template>


            <ng-template #editone let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">update</button>
                </div>
            </ng-template>

            <ng-template #edittwo let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">update</button>
                </div>
            </ng-template>

            <ng-template #editthree let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editfour let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>

            <ng-template #editfive let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editsix let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editseven let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editeight let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editnine let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>


            <ng-template #editten let-modal>
                <div class="modal-header">
                    <h4 class="modal-title" id="modal-basic-title">Primary Activity</h4>
                    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Crop Activity Master</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark"
                        (click)="modal.close('Save click')">Submit</button>
                </div>
            </ng-template>



            <ng-template #delete let-modal class="delete_modal">
                <div class="modal-header">
                    Are you sure ?
                </div>

                <div class="modal-body">
                    <button type="button" class="btn btn-outline-dark btn_delete" (click)="modal.close('Save click')">
                        Delete
                    </button>
                    <button type="button" class=" btn btn-outline-dark close btn_close" aria-label="Close"
                        (click)="modal.dismiss('Cross click')">
                        cancel
                    </button>
                </div>

                <div class="modal-footer">

                </div>
                <!-- <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="dateOfBirth">Date of birth</label>
                                    <div class="input-group">
    
                                    </div>
                                </div>
                            </form>
                        </div> -->
            </ng-template>


        </div>
    </div>
</div>
</div>

<script>
    // Add the following code if you want the name of the file appear on select
    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });
</script>