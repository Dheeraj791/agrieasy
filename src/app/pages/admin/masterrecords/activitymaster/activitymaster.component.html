<div class="box_main">
  <div class="container" style="margin: 0px 0px !important">
    <div
      class="col-md-12 bg-card shadow rounded overflow-hidden"
      style="background-color: white"
    >
      <div class="header_top_btn mb-5">
        <div class="row">
          <div class="col-md-6">
            <h1 class="master-heading-small">Activity Master</h1>
          </div>
          <div class="col-md-6">
            <button
              class="addbtn"
              mat-flat-button
              [color]="'primary'"
              (click)="open(addnew, '')"
            >
              Add New Activity
            </button>
          </div>
        </div>
      </div>
      <div class="">
        <table
          datatable
          [dtOptions]="dtOptions"
          [dtTrigger]="dtTrigger"
          class="row-border hover"
        >
          <thead>
            <tr>
              <th>S.Id</th>
              <th>Activity Name</th>
              <th>Activity Type</th>
              <th>Status</th>
              <th>Edit</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let list of activityMasterRecords">
              <td>{{ list.mr_activity_id }}</td>
              <td>{{ list.mr_activity_name }}</td>
              <td>{{ list.mr_activity_desc }}</td>
              <td class="delete_icons" (click)="statusModal(delete, list)">
                <mat-icon svgIcon="dripicons:trash"></mat-icon>
              </td>
              <td (click)="open(edit, list)" class="edit_icons">
                <mat-icon svgIcon="dripicons:pencil"></mat-icon>
              </td>
            </tr>
          </tbody>
        </table>
        <!-- <ng-template #add let-modal>
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="dateOfBirth">Date of birth</label>
                <div class="input-group"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-dark"
              (click)="modal.close('Save click')"
            >
              Save
            </button>
          </div>
        </ng-template> -->
        <ng-template #edit let-modal>
          <form
          #updateActivity="ngForm"
            (ngSubmit)="onUpdateActivity(updateActivity)"
            
          >
            <div class="modal-header">
              <h4 class="modal-title" id="modal-basic-title">
                Update Activity Name
              </h4>
              <button
                type="button"
                class="close"
                aria-label="Close"
                (click)="modal.dismiss('Cross click')"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="flex-auto">
                    <mat-label>Activity name</mat-label>
                    <input matInput type="text" [(ngModel)]="singleActivity.mr_activity_name" name="singleActivity.mr_activity_name" required />
                    <mat-icon matSuffix [svgIcon]="'account_circle'"></mat-icon>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="flex-auto">
                    <mat-label>Activity type</mat-label>
                    <select
                      matNativeControl
                      [(ngModel)]="singleActivity.mr_activity_type"
                      name="singleActivity.mr_activity_type"
                      required
                    >
                      <option value="{{ singleActivity.mr_activity_type }}">{{singleActivity.mr_activity_type}}</option>
                      <!-- <option value="Material Based Activity">Material Based Activity</option> -->
                    </select>
                    <!-- <mat-icon
                      matPrefix
                      [svgIcon]="'arrow_right_alt'"
                    ></mat-icon> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group">
                <mat-label class="cutom-label">Description</mat-label>
                <ckeditor [editor]="Editor" [data]="addDescription" [(ngModel)]="addDescription" name="addDesc"></ckeditor>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="submit"
                class="btn btn-outline-dark"
              >
                Submit
              </button>
            </div>
          </form>
        </ng-template>
        <ng-template #status let-modal>
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Profile update</h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="dateOfBirth">Date of birth</label>
                <div class="input-group"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-dark"
              (click)="modal.close('Save click')"
            >
              Save
            </button>
          </div>
        </ng-template>

        <ng-template #addnew let-modal>
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Add New Activity</h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form #addActivity="ngForm" (ngSubmit)="onAddActivity(addActivity)">
              <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="flex-auto">
                    <mat-label>Activity name</mat-label>
                    <input matInput type="text" [(ngModel)]="activityName" name="activityName" required />
                    <mat-icon matSuffix [svgIcon]="'account_circle'"></mat-icon>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="flex-auto">
                    <mat-label>Activity type</mat-label>
                    <select
                      matNativeControl
                      [(ngModel)]="selectedActivityType"
                      name="activityType"
                      (change) = "onActivityTypeChange($event)"
                      required
                    >
                      <option *ngFor="let type of activityType" value="{{type.id}}">{{type.name}}</option>
                    </select>
                    <!-- <mat-icon
                      matPrefix
                      [svgIcon]="'arrow_right_alt'"
                    ></mat-icon> -->
                  </mat-form-field>
                </div>
              </div>
              <div class="form-group">
                <mat-label class="cutom-label">Description</mat-label>
                <ckeditor [editor]="updateEditor" [data]="description" [(ngModel)]="description" name="desc"></ckeditor>
              </div>

              <div class="modal-footer">
                <button
                  type="submit"
                  class="btn btn-outline-dark"
                >
                  Submit
                </button>
              </div>
            </form>
          </div>
        </ng-template>
        <ng-template #delete let-modal class="delete_modal">
          <div class="modal-header">Are you sure ?</div>
          <div class="modal-body">
            <button
              type="button"
              class="btn btn-outline-dark btn_delete"
              (click)="onChangeStatus()"
            >
              Delete
            </button>
            <button
              type="button"
              class="btn btn-outline-dark close btn_close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              cancel
            </button>
          </div>
          <div class="modal-footer"></div>
        </ng-template>
      </div>
    </div>
  </div>
</div>
